CREATE TRIGGER [AddProduct]
	ON [dbo].[Products]
	AFTER INSERT
AS
BEGIN
    SET NOCOUNT ON;

    -- Sprawdzamy, czy nowo dodany produkt jest aktywny
    IF EXISTS (SELECT 1 FROM inserted WHERE IsActive = 1)
    BEGIN
        -- Dodajemy nowy produkt do koszyka
        DECLARE @NewProductID INT
        SELECT @NewProductID = ID FROM inserted
        
        INSERT INTO BasketPosition (ProductID, Amount, Price, UserID)
        VALUES (@NewProductID, 1, (SELECT Price FROM inserted), 1) -- Zakładamy, że UserID 1 oznacza użytkownika, który dodaje produkt do koszyka
    END
END;